angular.module('Netsafe').controller('malwareController', function($scope) {
	console.log('you are in malwareController');

  $scope.playerVars = {
    controls: 1,
    rel: 0
  };

  $scope.malwareVid = 'https://www.youtube.com/watch?v=nukvi5wITBI'; // done or revised
  $scope.virusVid = 'https://www.youtube.com/watch?v=FhZBuX7EYLQ';  // done or revised
  $scope.trojanVid = 'https://www.youtube.com/watch?v=L4mQ6crCtnA'; // done or revised
  $scope.wormsVid = 'https://www.youtube.com/watch?v=INCdIi3x8nE';  // done or revised
  $scope.adwareVid = 'https://www.youtube.com/watch?v=RYC1Ss9MxFw'; // done or revised
  $scope.spywareVid = 'https://www.youtube.com/watch?v=WVxoodsHBoo'; // done or revised
  $scope.keyloggerVid = 'https://www.youtube.com/watch?v=o8h561TCYUo';  // done or revised
  $scope.ransomwareVid = 'https://www.youtube.com/watch?v=Euh6nw4pLbs'; // done or revised

  // var buttonBool = true;
  var pauseCount = 0;

  $scope.$on('youtube.player.playing', function($event, player){
    console.log(player.getVideoData().video_id); // get the video id of the playing video

    if(player.getVideoData().video_id == "nukvi5wITBI"){
      console.log("hello, malware vid is playing");
      if (pauseCount == 0){ // pause at first pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 21000);   // 0:20
        pauseCount++;
      } else if (pauseCount == 1){ // second pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 17000);   // 0:37
        pauseCount++;
      } else if (pauseCount == 2){ // third pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 12000);   // 0:49
        pauseCount++;
      } else if (pauseCount == 3){ // fourth pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 9000);   // 0:58
        pauseCount++;
      } else if (pauseCount == 4){ // fifth pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 12000);   // 1:10
        pauseCount++;
      }         // malware video
    } else if (player.getVideoData().video_id == "FhZBuX7EYLQ"){    // virus video
      console.log("hello, virus vid is playing");
      if (pauseCount == 0){ // pause at first pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 10000);   // 0:10
        pauseCount++;
      }
    } else if (player.getVideoData().video_id == "L4mQ6crCtnA"){    // trojan video
      console.log("hello, trojan vid is playing");
      if (pauseCount == 0){ // pause at first pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 4800);   // 0:04
        pauseCount++;
      } else if (pauseCount == 1){  // second pause
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 11000);   // 0:15
        pauseCount++;
      }
    } else if (player.getVideoData().video_id == "INCdIi3x8nE"){    // worms video
      console.log("hello, worms vid is playing");
      if (pauseCount == 0){ // pause at first pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 6000);   // 0:06
        pauseCount++;
      }
    } else if (player.getVideoData().video_id == "RYC1Ss9MxFw"){    // adware video
      console.log("hello, adware vid is playing");
      if (pauseCount == 0){ // pause at first pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 6300);   // 0:06
        pauseCount++;
      } else if (pauseCount == 1){  // second pause
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 13700);   // 0:20
        pauseCount++;
      }
    } else if (player.getVideoData().video_id == "WVxoodsHBoo"){    // spyware video
      console.log("hello, spyware vid is playing");
      if (pauseCount == 0){ // pause at first pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 10000);   // 0:09
        pauseCount++;
      } else if (pauseCount == 1){  // second pause
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 9000);   // 0:18
        pauseCount++;
      } else if (pauseCount == 2){  // third pause
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 8000);   // 0:26
        pauseCount++;
      } else if (pauseCount == 3){  // fourth pause
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 5000);   // 0:31
        pauseCount++;
      }
    } else if (player.getVideoData().video_id == "o8h561TCYUo"){    // keylogger video
      console.log("hello, keylogger vid is playing");
      if (pauseCount == 0){ // pause at first pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 5000);   // 0:04
        pauseCount++;
      }
    } else {                                                        // ransomware video
      console.log("hello, ransomware vid is playing");
      if (pauseCount == 0){ // pause at first pause time
        setTimeout($scope.pauseVideo = function(){
                    player.pauseVideo();
                  }, 7000);   // 0:06
        pauseCount++;
      }
    }

    // problem: its not at a SPECIFIC time, pause @ ___ seconds, play, pauses @ ___ seconds
    // if the pause is by the teacher, then it will work up everything
    console.log(pauseCount);
  });

  // puts pauseCount counter back to 0
  $scope.$on('youtube.player.ended', function($event, player){
    pauseCount = 0;
    console.log(pauseCount);
  });

   var prevID = 0;

  $scope.showTab = function(id){
    pauseCount = 0;

    if(prevID === id){
      $(".malwr-btn").removeClass("active");
      $scope.showTab(1);

      prevID = 0;
    } else {
      $(".malwr-btn").removeClass("active");
      $(".tab-content").hide();

      $("#malwr-btn-"+ id).addClass("active");
      $("#tab-content-" + id).show();

      prevID = id;
    }
  };

  $scope.showTab(1);

  $scope.showHelpTab = function(id){
    if(prevID === id){
      $(".malwr-help-btn").removeClass("active");
      $scope.showHelpTab(10);

      prevID = 0;
    } else {
      $(".malwr-help-btn").removeClass("active");
      $(".tab-help-content").hide();

      $("#malwr-help-btn-"+ id).addClass("active");
      $("#tab-help-content-" + id).show();

      prevID = id;
    }
  };

  $scope.showHelpTab(10);


});
